<!DOCTYPE html>
<!-- 
 作者:KeJyun
 建立日期:2013-06-09
 最後修改日期:2013-08-11
 聯絡方式:kejyun@gmail.com
 -->
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>Laravel 4 PHP Framework Documentation 繁體中文教學文件 : Facades</title>
<link rel="shortcut icon" type="image/x-icon" href="../../favicon.ico">
<meta name="description" content="Laravel, 優雅的PHP網頁工匠框架(Framework) 開始享受開發上的樂趣吧!">
<meta name="keyword" content="Laravel,Documentation,教學,文件,繁體,中文,PHP,Framework,框架,優雅" />

<link media="all" type="text/css" rel="stylesheet" href="../../css/style.css">
<script src="../../js/modernizr-2.6.2.min.js"></script>

<style type="text/css">
.docs-menu ul li{
    margin-top: 10px;
}
.to-top{
    right: 515px;
}
body{
    font-family: "Helvetica Neue", Arial, 微軟正黑體, "Microsoft JhengHei", 新細明體, "Lucida Grande", "Lucida Sans Unicode", sans-serif;
}
</style>
</head>
<body>
<!-- Header -->
<header>
    <div class="container">
        <a href="http://laravel.com/" title="Laravel PHP Framework" class="logo" target="_blank">&nbsp;</a>
        <nav class="menu">
            <ul>
                <li>
                    <a href="http://laravel.com/" title="Welcome" target="_blank">Welcome</a>
                </li>
                <li>
                    <a href="http://laravel.com/docs" title="Documentation" target="_blank">Documentation</a>
                </li>
                <li class="active">
                    <a href="../../docs/introduction" title="中文文件">中文文件</a>
                </li>
                <li>
                    <a href="http://laravel.com/api" title="API" target="_blank">API</a>
                </li>
                <li>
                    <a href="https://github.com/laravel/laravel" title="Github" target="_blank">Github</a>
                </li>
                <li>
                    <a href="http://forums.laravel.io/" title="論壇" target="_blank">論壇</a>
                </li>
                <li>
                    <a href="http://twitter.com/laravelphp" title="Twitter" target="_blank">Twitter</a>
                </li>
            </ul>
        </nav>
        <a class="to-top">回到最上方</a>

    </div>
</header>

<!-- Header sectoin -->
<section class="docs-heading">
    <div class="container">
        <h2>文件</h2>
        <div class="sponsor">
            <span>贊助商 </span>
            <a href="http://www.cartalyst.com/" title="Cartalyst" target="_blank">
                <img src="../../img/cartalyst_small.png">
            </a>
        </div>
    </div>
</section>

<section class="docs-content">
    <div class="container">
    <nav class="docs-menu">
        <ul>
            <li>前言                <ul>
                    <li><a href="../../docs/introduction">介紹</a></li>
                    <li><a href="../../docs/quick">快速開始</a></li>
                    <li><a href="../../docs/contributing">貢獻</a></li>
                </ul>
            </li>
            <li>
                入門                <ul>
                    <li><a href="../../docs/installation">安裝</a></li>
                    <li><a href="../../docs/configuration">設定</a></li>
                    <li><a href="../../docs/lifecycle">生命週期</a></li>
                    <li><a href="../../docs/routing">路由</a></li>
                    <li><a href="../../docs/requests">請求及輸入<br />(Requests &amp; Input)</a></li>
                    <li><a href="../../docs/responses">視圖及回應<br />(Views &amp; Responses)</a></li>
                    <li><a href="../../docs/controllers">控制器(Controllers)</a></li>
                    <li><a href="../../docs/errors">錯誤及記錄</a></li>
                </ul>
            </li>

            <li>
                更多                <ul>
                <li><a href="../../docs/cache">快取</a></li>
                <li><a href="../../docs/events">事件</a></li>
                <li><a href="../../docs/facades">Facades</a></li>
                <li><a href="../../docs/html">表單及HTML</a></li>
                <li><a href="../../docs/helpers">Helpers 函式</a></li>
                <li><a href="../../docs/ioc">IoC容器</a></li>
                <li><a href="../../docs/localization">在地化</a></li>
                <li><a href="../../docs/mail">郵件</a></li>
                <li><a href="../../docs/packages">套件開發</a></li>
                <li><a href="../../docs/pagination">分頁</a></li>
                <li><a href="../../docs/queues">佇列</a></li>
                <li><a href="../../docs/security">安全性</a></li>
                <li><a href="../../docs/session">Session</a></li>
                <li><a href="../../docs/templates">樣板</a></li>
                <li><a href="../../docs/testing">單元測試</a></li>
                <li><a href="../../docs/validation">驗證</a></li>
                </ul>
            </li>
            <li>
                資料庫                <ul>
                    <li><a href="../../docs/database">基本用法</a></li>
                    <li><a href="../../docs/queries">Query產生器</a></li>
                    <li><a href="../../docs/eloquent">Eloquent ORM</a></li>
                    <li><a href="../../docs/schema">Schema產生器</a></li>
                    <li><a href="../../docs/migrations">Migrations &amp; Seeding</a></li>
                    <li><a href="../../docs/redis">Redis</a></li>
                </ul>
            </li>

            <li>
                Artisan介面指令                <ul>
                    <li><a href="../../docs/artisan">概要</a></li>
                    <li><a href="../../docs/commands">開發</a></li>
                </ul>
            </li>
        </ul>
    </nav>


    <article class="docs-body">
        <h1>Facades</h1>

<ul>
    <li>
        <a href="#introduction">介紹</a>
    </li>
    <li>
        <a href="#explanation">解釋</a>
    </li>
    <li>
        <a href="#practical-usage">實際使用</a>
    </li>
    <li>
        <a href="#creating-facades">建立Facades</a>
    </li>
    <li>
        <a href="#mocking-facades">模擬Facades</a>
    </li>
</ul>

<p><a name="introduction"></a></p>

<h2>介紹</h2>

<p>
    Facades 提供一個 "靜態" 介面讓類別能夠運用在應用程式的 <a href="../../docs/ioc">IoC容器</a> (Ioc container)。 Laravel 裝載很多 facades，甚至你可能不知不覺已經使用過它們了！
</p>

<p>
    有時候，你也許希望為你的應用程式和套件建立自己的 facades，所以讓我們來探討這些類別的概念、開發和用法。
</p>

<blockquote>
  <p><strong>注意:</strong> 在深入 facades 之前，強烈建議先熟悉了解 Laravel 的 <a href="../../docs/ioc">IoC容器</a>。</p>
</blockquote>

<p><a name="explanation"></a></p>

<h2>解釋</h2>

<p>
    對 Laravel 應用程式而言，facade 是提供從容器存取物件的一個類別。 能讓這裝置正常運作的原因，正是這些 <code>Facade</code> 類別。 Laravel 的 facades 以及任何你所建立的自訂 facades，都將繼承這個類別來當基礎。
</p>

<p>
    你的 facade 類別只需要實作一個方法 <code>getFacadeAccessor</code> 。 <code>getFacadeAccessor</code> 的工作就是去定義哪些東西要從容器分析出來。 而 <code>Facade</code> 基本類別利用 <code>__callStatic()</code> 神奇方法來從你的 facade 呼叫並分析物件。
</p>

<p><a name="practical-usage"></a></p>

<h2>實際使用</h2>

<p>
    下面是一個 Laravel 快取系統呼叫的範例。 從程式碼中粗略來看，假設 <code>Cache</code>  類別的靜態方法 <code>get</code> 正被呼叫。
</p>

<pre><code>$value = Cache::get('key');
</code></pre>

<p>
    然而，如果我們試著看看 <code>Illuminate\Support\Facades\Cache</code> 這個類別，你將會發現它並沒有 <code>get</code> 靜態方法:
</p>

<pre><code>class Cache extends Facade {

    /**
     * Get the registered name of the component.
     *
     * @return string
     */
    protected static function getFacadeAccessor() { return 'cache'; }

}
</code></pre>

<p>
    這個 Cache 類別繼承了基本的 <code>Facade</code> 類別，並且定義了 <code>getFacadeAccessor()</code> 方法。 記住，這個方法的工作是用來回傳控制反轉所綁定的名稱。
</p>

<p>
    當一個使用者在 <code>Cache</code> 這個 facade 參照任何靜態方法，Laravel 會從控制反轉容器中分析被綁定的 <code>cache</code> ，並執行被請求的方法(這個案例就是 <code>get</code> )。
</p>

<p>
    所以，我們的 <code>Cache::get</code> 呼叫起來，應該會被覆寫像是:
</p>

<pre><code>$value = $app-&gt;make('cache')-&gt;get('key');
</code></pre>

<p><a name="creating-facades"></a></p>

<h2>建立Facades</h2>

<p>
    為自己的應用程式或套件建立 facade 是相當簡單的。 你只需要三件事:
</p>

<ul>
    <li>一個控制反轉(Ioc)綁定</li>
    <li>一個 facade 類別</li>
    <li>一個 facade 別名設定</li>
</ul>

<p>
    看看這個範例，這裡我們有一個類別 <code>PaymentGateway\Payment</code> 定義如下。
</p>

<pre><code>namespace PaymentGateway;

class Payment {

    public function process()
    {
        //
    }

}
</code></pre>

<p>
    我們需要能夠從控制反轉容器中分析這個類別。 所以我們進行綁定:
</p>

<pre><code>App::bind('payment', function()
{
    return new \PaymentGateway\Payment;
});
</code></pre>

<p>
    綁定後將會建立一個被命名為 <code>PaymentServiceProvider</code> 新的 <a href="../../docs/ioc#service-providers">服務提供者 (service provider) </a> 服務供應器。並追加到 <code>register</code> 方法。 你可以從 <code>app/config/app.php</code> 追加設定讓 Laravel 讀取你的服務供應器。
</p>

<p>接下來，我們建立自己的 facade 類別:</p>

<pre><code>use Illuminate\Support\Facades\Facade;

class Payment extends Facade {

    protected static function getFacadeAccessor() { return 'payment'; }

}
</code></pre>

<p>
    最後，如果我們想要的話，可以從 <code>app/config/app.php</code> 的設定檔追加 facade 別名到 <code>aliases</code> 陣列中。 現在，我們能夠從 <code>Payment</code> 實例來呼叫 <code>process</code> 方法。
</p>

<pre><code>Payment::process();
</code></pre>

<p><a name="mocking-facades"></a></p>

<h2>模擬Facades</h2>

<p>
    單元測試是為什麼要使用 facades 來作業的重要一環。 事實上，可測試性甚至是 facades 存在的主要理由。 更多資訊可參考 <a href="../../docs/testing#service-providers">模擬Facades (mocking facades)</a> 這篇章節。
</p>
        <h1>討論</h1>
        <div id="disqus_thread"></div>
    </article>
    <div class="clearfix"></div>
    </div>


    
</section>



<footer>
    <div class="container">
        <a href="http://laravel.com/" title="Laravel PHP Framework" class="logo" target="_blank">
            <img src="http://kejyun.github.io/Laravel-4-Documentation-Traditional-Chinese/img/footer_logo.png" alt="Laravel PHP Framework">
        </a>
        <nav class="menu">
            <ul>
                <li>
                    <a href="http://laravel.com/" title="Welcome" target="_blank">Welcome</a>
                </li>
                <li>
                    <a href="http://laravel.com/docs" title="Documentation" target="_blank">Documentation</a>
                </li>
                <li class="active">
                    <a href="../../docs/introduction" title="中文文件">中文文件</a>
                </li>
                <li>
                    <a href="http://laravel.com/api" title="API" target="_blank">API</a>
                </li>
                <li>
                    <a href="https://github.com/laravel/laravel" title="Github" target="_blank">Github</a>
                </li>
                <li>
                    <a href="http://forums.laravel.io/" title="論壇" target="_blank">論壇</a>
                </li>
                <li>
                    <a href="http://twitter.com/laravelphp" title="Twitter" target="_blank">Twitter</a>
                </li>
            </ul>
        </nav>
        <p class="copyright">Copyright &copy; 2013 Taylor Otwell. 網站由 <a href="http://casserolelabs.com/" title="Casserole Labs" target="_blank">Casserole Labs</a> 及 <a href="http://daylerees.com" title="Dayle Rees">Dayle Rees</a> 設計，中文翻譯 <a href="http://blog.kejyun.com" target="_blank">KeJyun</a> 及 <a href="http://blog.liaosankai.com" target="_blank">SANKAI</a> </p>
    </div>
</footer>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://laravel.com/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="../../js/plugins.js"></script>
<script src="../../js/main.min.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-31063691-6', 'kejyun.github.io');
  ga('send', 'pageview');
</script>

<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'laraveltw'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

</body>
</html>